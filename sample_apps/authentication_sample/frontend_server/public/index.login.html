<!DOCTYPE html>
<html>
  <head>
    <title>Sample Code</title>
    <meta charset="utf-8">
  </head>
  <body>
    <div class="content">

    </div>

    <script src="./autodesk-spark-sdk-0.0.2.min.js"></script>
    <script>
        ADSKSpark.Client.initialize('nowMt9VXkc9OiG8u7iKLNN9fKWQbMLVM',// Your app key
                'http://localhost:3000/guest_token',// The guest token endpoint implemented by your server (i.e. http://example.com/guest_token)
                'http://localhost:3000/access_token',// The access token endpoint implemented by your server (i.e. http://example.com/access_token)
                'http://localhost:3000/refresh_token',// The refresh access token endpoint implemented by your server (i.e. http://example.com/refresh_token)
                ADSKSpark.Constants.API_HOST_SANDBOX // api host - API_HOST_PRODUCTION or API_HOST_SANDBOX
        );

        var Client = ADSKSpark.Client;
        Client.initialize(APP_KEY, GUEST_TOKEN_URL, ACCESS_TOKEN_URL, REFRESH_TOKEN_URL, API_URL);
        /**
         * Open login window
         */
        function login() {
            window.location = Client.getLoginRedirectUrl();   
        }

        function logout(){
            ADSKSpark.Client.logout();
            location.reload();
        }

        function getGuestToken(){
            ADSKSpark.Client.getGuestToken().then(function(guestToken) {
                console.log('guest token: ',guestToken);
            });
        }

        function isAccessTokenValid(){
          console.log("GOOD GOD MAN");
          if (ADSKSpark.Client.isAccessTokenValid()) {
              console.log('access token: ',ADSKSpark.Client.getAccessToken());
              ADSKSpark.Members.getMyProfile().then(function(response){
                console.log('Current logged in member is: ', response.member);
              });
          }
        }

    </script>
    <form>
       <button type="button" onclick="login();">Login</button>
       <button type="button" onclick="isAccessTokenValid();">CheckLogin Status</button>
       <input id="fileInput" type="file" />
    </form>
  </body>
</html>